<!DOCTYPE html>
<html>
  <head>

    <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyBfAHRlmuP8bkagQqR_S7r3e7wAUydLt4E",
        authDomain: "dublinslider.firebaseapp.com",
        databaseURL: "https://dublinslider.firebaseio.com",
        projectId: "dublinslider",
        storageBucket: "dublinslider.appspot.com",
        messagingSenderId: "399862458831"
      };
      firebase.initializeApp(config);
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Evercam map</title>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/4.9.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/4.9.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.9.1/firebase-database.js"></script>
    <script defer src="/__/firebase/4.9.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.9.1/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <style>
    #map{
      width: 100%;
      height: 700px;
    }
    div#comparison {
      width: 700px;
      height: 500px;
      max-width: 600px;
      max-height: 600px;
      overflow: hidden; }
    div#comparison figure {
      position: relative;
      font-size: 0;
      width: 100%;
      height: 100%;
      margin: 0;
    }
    div#comparison figure > img {
      position: relative;
      width: 100%;
    }
    div#comparison figure div {
      position: absolute;
      width: 50%;
      box-shadow: 0 5px 10px -2px rgba(0,0,0,0.3);
      overflow: hidden;
      bottom: 0;
      height: 100%;
    }

    input[type=range]{
      -webkit-appearance:none;
      -moz-appearance:none;
      position: relative;
      top: -2rem; left: -2%;
      background-color: rgba(255,255,255,0.1);
      width: 102%;
    }
    input[type=range]:focus {
      outline: none;
    }
    input[type=range]:active {
      outline: none;
    }

    input[type=range]::-moz-range-track {
      -moz-appearance:none;
        height:15px;
        width: 98%;
        background-color: rgba(255,255,255,0.1);
        position: relative;
        outline: none;
     }
    input[type=range]::active {
      border: none;
      outline: none;
    }
    input[type=range]::-webkit-slider-thumb {
        -webkit-appearance:none;
        width: 20px; height: 15px;
        background: #fff;
        border-radius: 0;
       }
    input[type=range]::-moz-range-thumb {
      -moz-appearance: none;
      width: 20px;
      height: 15px;
      background: #fff;
      border-radius: 0;
         }
    input[type=range]:focus::-webkit-slider-thumb {
        background: rgba(255,255,255,0.5);
       }
    input[type=range]:focus::-moz-range-thumb {
        background: rgba(255,255,255,0.5);
       }

    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var storage = firebase.storage();
      var storageRef = storage.ref();
      var spaceRef = storageRef.child('logo.png');
      var before = storageRef.child('whiskey-sour.jpg');
      var after = storageRef.child('beer-cheers.jpg');
      var path = spaceRef.fullPath;
      var pathBefore = before.fullPath;
      var pathAfter = after.fullPath;
      var map;
      function initMap() {
        var evercam = {lat: 53.354042, lng: -6.266343};
        var phoenix = {lat: 53.355924, lng: -6.329348};
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: evercam
        });

        var divisor = document.getElementById("divisor");
        var slider = document.getElementById("slider");
        var handle = document.getElementById("handle");
        var contentString = '<div id="comparison" oncreate="iniciar()">' +
          '<figure id="myFigure">' +
            '<div id="divisor"></div>' +
          '</figure>' +
          '<input type="range" min="0" max="100" value="50" id="slider" oninput="moveDivisor()">' +
        '</div>';
        var infowindow1 = new google.maps.InfoWindow({
          content: contentString
        });

        var icon = {
          url: path, // url
          scaledSize: new google.maps.Size(50, 50), // scaled size
          origin: new google.maps.Point(0,0), // origin
          anchor: new google.maps.Point(0, 0) // anchor
        };
        var marker = new google.maps.Marker({
          position: evercam,
          map: map,
          icon: icon
        });
        var marker2 = new google.maps.Marker({
          position: phoenix,
          map: map,
          icon: icon
        });
        marker.addListener('click', function() {
            infowindow1.open(map, marker);
            var i = document.getElementById('myFigure');
            i.style.background = "url('before.jpg')";
            i.style.backgroundSize = "700px 500px";
            var z = document.getElementById('divisor');
            z.style.background = "url('after.jpg')";
            z.style.backgroundSize = "700px 500px";
            console.log("smile");
        });
      }
      function moveDivisor() {
        divisor.style.width = slider.value+"%";
      }
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBfkD357eLUWtkbqs35bhHFiB4QHtT1N_0&callback=initMap">
    </script>
  </body>
</html>
